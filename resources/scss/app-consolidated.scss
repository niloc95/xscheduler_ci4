// ============================================
// WebSchedulr Design System - Main SCSS File
// ============================================
// This file consolidates all CSS into a well-organized,
// maintainable structure following SCSS 7-1 architecture

@tailwind base;
@tailwind components;
@tailwind utilities;

// =============
// 1. ABSTRACTS
// =============
// Variables, mixins, functions - no actual CSS output
@import 'abstracts/variables';
@import 'abstracts/mixins';
@import 'abstracts/custom-properties';

// =============
// 2. BASE
// =============
// Reset, typography, global styles
@import 'base/reset';

// =============
// 3. LAYOUT
// =============
// Grid system, navigation, page structure
@import 'layout/grid';
@import 'layout/navigation';

// =============
// 4. COMPONENTS
// =============
// Reusable UI components
@import 'components/buttons';
@import 'components/cards';
@import 'components/forms';
@import 'components/status';
@import 'components/unified-sidebar';

// FullCalendar overrides
// Include FullCalendar base CSS, then our Tailwind-based overrides
@import '../css/fullcalendar-overrides.css';

// =============
// 5. PAGES
// =============
// Page-specific styles
@import 'pages/dashboard';
@import 'pages/auth';

// =============
// 6. UTILITIES
// =============
// Helper classes and overrides
@import 'utilities/icons';

@layer utilities {
  // Brand Color Utilities
  .text-brand-ocean { color: $brand-ocean !important; }
  .text-brand-crimson { color: $brand-crimson !important; }
  .text-brand-orange { color: $brand-orange !important; }
  .text-brand-golden { color: $brand-golden !important; }
  .text-brand-cream { color: $brand-cream !important; }
  
  .bg-brand-ocean { background-color: $brand-ocean !important; }
  .bg-brand-crimson { background-color: $brand-crimson !important; }
  .bg-brand-orange { background-color: $brand-orange !important; }
  .bg-brand-golden { background-color: $brand-golden !important; }
  .bg-brand-cream { background-color: $brand-cream !important; }
  
  .border-brand-ocean { border-color: $brand-ocean !important; }
  .border-brand-orange { border-color: $brand-orange !important; }
  .border-brand-golden { border-color: $brand-golden !important; }
  
  // Shadow Utilities
  .shadow-brand { box-shadow: $shadow-brand !important; }
  .shadow-brand-lg { box-shadow: $shadow-brand-lg !important; }
  .shadow-material { box-shadow: $material-shadow !important; }
  .shadow-material-lg { box-shadow: $material-shadow-lg !important; }
  
  // Animation Utilities
  .fade-in { @include fade-in; }
  .slide-up { @include slide-up; }
  
  // Text Utilities
  .text-truncate { @include text-truncate; }
  .text-truncate-2 { @include text-truncate-multiline(2); }
  .text-truncate-3 { @include text-truncate-multiline(3); }
  
  // Visibility Utilities
  .visually-hidden { @include visually-hidden; }
}

// =============
// 7. LEGACY COMPATIBILITY
// =============
// Maintain backwards compatibility with existing inline styles
// These will be gradually removed as we migrate components

// Dashboard legacy support
.main-content {
  min-height: 100vh;
}

// Material Web Components custom properties (consolidated)
md-filled-button {
  --md-filled-button-container-color: var(--md-sys-color-primary);
  --md-filled-button-label-text-color: var(--md-sys-color-on-primary);
}

md-outlined-card {
  --md-outlined-card-outline-color: var(--xs-border);
  border-radius: $border-radius-xl;
}

/* ===================================
   FullCalendar v6 - Tailwind Integration
   =================================== */

#appointments-inline-calendar {
  width: 100%;
  
  .fc {
    width: 100%;
    background-color: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem; /* rounded-xl to match cards */
    padding: 0; /* Remove padding to let header touch edges */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm to match cards */
    overflow: hidden; /* Ensure rounded corners work properly */
  }

  /* Calendar header - matches dashboard card headers */
  .fc .fc-col-header {
    background-color: transparent;
  }

  .fc .fc-col-header-cell {
    background-color: #ffffff; /* Match card bg */
    border-color: #e5e7eb;
    border-bottom: 1px solid #e5e7eb; /* Add bottom border like card headers */
    padding: 0.75rem 0.5rem; /* px-6 py-4 equivalent for header */
    font-size: 0.75rem; /* text-xs for day names */
    font-weight: 600; /* font-semibold */
    text-transform: uppercase;
    color: #6b7280; /* text-gray-500 */
    letter-spacing: 0.05em; /* tracking-wider */
  }

  /* Calendar body padding */
  .fc .fc-scrollgrid {
    border-top-width: 0;
  }

  .fc .fc-daygrid-body {
    background-color: #ffffff;
  }

  /* Day cells */
  .fc .fc-daygrid-day {
    background-color: #ffffff;
    border-color: #e5e7eb;
  }

  .fc .fc-daygrid-day:hover {
    background-color: #f9fafb;
  }

  /* Day numbers - styled as Tailwind badges */
  .fc-daygrid-day-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.25rem;
    height: 2.25rem;
    font-weight: 600;
    font-size: 0.875rem;
    border-radius: 9999px;
    transition: all 0.2s ease;
    color: #374151;
  }

  .fc-daygrid-day:hover .fc-daygrid-day-number {
    background-color: rgba(37, 99, 235, 0.12);
    color: #1d4ed8;
  }

  /* Today highlight - blue-600 */
  .fc-daygrid-day.fc-day-today {
    background-color: rgba(37, 99, 235, 0.05);
  }

  .fc-daygrid-day.fc-day-today .fc-daygrid-day-number {
    background-color: #2563eb;
    color: #ffffff;
    font-weight: 700;
  }

  /* Other month days */
  .fc .fc-day-other .fc-daygrid-day-number {
    color: #9ca3af;
  }

  /* Event styling */
  .fc-event {
    border-radius: 0.375rem;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 500;
    border: none;
  }

  /* TimeGrid (Week/Day) View Styling */
  .fc-timegrid-slot {
    height: 3rem;
    border-color: #e5e7eb;
  }

  .fc-timegrid-slot-label {
    border-color: #e5e7eb;
    color: #6b7280;
    font-size: 0.75rem;
    font-weight: 500;
    padding: 0.25rem 0.5rem;
  }

  .fc-timegrid-col {
    border-color: #e5e7eb;
  }

  .fc-timegrid-now-indicator-line {
    border-color: #2563eb;
    border-width: 2px;
  }

  .fc-timegrid-now-indicator-arrow {
    border-color: #2563eb;
  }

  /* Time axis */
  .fc-timegrid-axis {
    border-color: #e5e7eb;
  }

  /* All-day section */
  .fc-timegrid-divider {
    border-color: #e5e7eb;
    padding: 0.5rem 0;
  }
}

/* ===================================
   Dark Mode - FullCalendar
   =================================== */

html.dark #appointments-inline-calendar {
  .fc {
    background-color: #1f2937; /* dark:bg-gray-800 to match cards */
    border-color: #374151; /* dark:border-gray-700 to match cards */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
  }

  .fc .fc-col-header-cell {
    background-color: #1f2937; /* Match dark card bg */
    border-color: #374151; /* dark:border-gray-700 */
    color: #9ca3af; /* text-gray-400 for dark mode */
  }

  .fc .fc-daygrid-body {
    background-color: #1f2937;
  }

  .fc .fc-daygrid-day {
    background-color: #1f2937;
    border-color: #374151;
  }

  .fc .fc-daygrid-day:hover {
    background-color: #374151;
  }

  .fc-daygrid-day-number {
    color: #e5e7eb;
  }

  .fc-daygrid-day:hover .fc-daygrid-day-number {
    background-color: rgba(96, 165, 250, 0.2);
    color: #93c5fd;
  }

  .fc-daygrid-day.fc-day-today {
    background-color: rgba(37, 99, 235, 0.15);
  }

  .fc-daygrid-day.fc-day-today .fc-daygrid-day-number {
    background-color: #1d4ed8;
    color: #f9fafb;
  }

  .fc .fc-day-other .fc-daygrid-day-number {
    color: #6b7280;
  }

  /* TimeGrid Dark Mode */
  .fc-timegrid-slot {
    border-color: #374151;
  }

  .fc-timegrid-slot-label {
    border-color: #374151;
    color: #9ca3af;
  }

  .fc-timegrid-col {
    border-color: #374151;
  }

  .fc-timegrid-now-indicator-line {
    border-color: #3b82f6;
  }

  .fc-timegrid-now-indicator-arrow {
    border-color: #3b82f6;
  }

  .fc-timegrid-axis {
    border-color: #374151;
  }

  .fc-timegrid-divider {
    border-color: #374151;
  }
}

// Chart containers
.chart-container {
  position: relative;
  height: 300px;
  width: 100%;
}

// Settings tabs (to be migrated to components)
.tab-btn {
  @apply px-3 py-2 text-sm rounded-t-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors;
  
  &.active {
    @apply bg-white dark:bg-gray-800 border-x border-t border-gray-200 dark:border-gray-700 -mb-px text-gray-900 dark:text-gray-100;
  }
}

// Form elements legacy
.form-field { /* spacing handled by grids/containers */ }
.checkbox { @apply rounded text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-400; }
.req { @apply text-red-600 dark:text-red-400; }
.file-input { @apply bg-white dark:bg-gray-700; }

// Ensure native controls render appropriate theme chrome
@layer base {
  input, select, textarea { color-scheme: light dark; }

  button,
  button:hover,
  [type='button'],
  [type='button']:hover,
  [type='submit'],
  [type='submit']:hover,
  [type='reset'],
  [type='reset']:hover,
  .btn,
  .btn:hover,
  a.btn,
  a.btn:hover,
  a.button,
  a.button:hover,
  a.inline-flex,
  a.inline-flex:hover,
  a.flex,
  a.flex:hover,
  [role='button'],
  [role='button']:hover {
    text-decoration: none !important;
  }
}

// Time slot components (scheduler)
.time-slot {
  @apply px-3 py-2 text-sm font-medium rounded-md border text-center cursor-pointer transition-all duration-200;
  
  &.time-slot-available {
    @apply bg-white border-gray-300 text-gray-700 hover:bg-blue-50 hover:border-blue-300;
  }
  
  &.time-slot-selected {
    @apply bg-blue-600 border-blue-600 text-white;
  }
  
  &.time-slot-booked {
    @apply bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed;
  }
  
  &.time-slot-past {
    @apply bg-gray-50 border-gray-200 text-gray-300 cursor-not-allowed;
  }
}

// Data Tables
.table-brand {
  @apply w-full border-collapse;
  
  th {
    @apply px-6 py-4 text-left font-semibold;
    background-color: $brand-cream;
    color: $brand-ocean;
    border-bottom: 2px solid $brand-ocean;
  }
  
  td {
    @apply px-6 py-4 border-b border-neutral-200;
  }
  
  tr:hover {
    background-color: rgba($brand-cream, 0.3);
  }
}

// =============
// 8. PRINT STYLES
// =============
@media print {
  // Hide non-essential elements
  .sidebar,
  .nav-toggle,
  .btn,
  .alert {
    display: none !important;
  }
  
  // Adjust layout for print
  .main-content {
    margin-left: 0 !important;
  }
  
  // Ensure good contrast
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
  }
}

// =============
// 9. PERFORMANCE OPTIMIZATIONS
// =============
// Optimize rendering performance
* {
  // Improve text rendering
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// Will-change for animated elements
.card:hover,
.btn:hover,
.nav-link:hover {
  will-change: transform;
}
